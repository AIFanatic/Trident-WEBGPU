var TransmittanceLUTWGSL = "#include \"@trident/plugins/Sky/resources/Common.wgsl\";\n#include \"@trident/plugins/Sky/resources/Vertex.wgsl\";\n\n@fragment\nfn fragmentMain(input: VertexOutput) -> @location(0) vec4<f32> {\n\n    let uv = input.uv;\n\n    let sun_cos_theta = uv.x * 2.0 - 1.0;\n    let sun_dir = vec3(-sqrt(1.0 - sun_cos_theta*sun_cos_theta), 0.0, sun_cos_theta);\n\n    let distance_to_earth_center = mix(EARTH_RADIUS, ATMOSPHERE_RADIUS, uv.y);\n    let ray_origin = vec3(0.0, 0.0, distance_to_earth_center);\n\n    let t_d = ray_sphere_intersection(ray_origin, sun_dir, ATMOSPHERE_RADIUS);\n    let dt = t_d / f32(TRANSMITTANCE_STEPS);\n\n    var result: vec4f = vec4(0.0);\n\n    for (var i: i32 = 0; i < TRANSMITTANCE_STEPS; i++) {\n        let t = (f32(i) + 0.5) * dt;\n        let x_t = ray_origin + sun_dir * t;\n\n        let altitude = length(x_t) - EARTH_RADIUS;\n\n        let out = get_atmosphere_collision_coefficients(altitude);\n        let aerosol_absorption = out.aerosol_absorption;\n        let aerosol_scattering = out.aerosol_scattering;\n        let molecular_absorption = out.molecular_absorption;\n        let molecular_scattering = out.molecular_scattering;\n        let extinction = out.extinction;\n\n        result += extinction * dt;\n    }\n\n    let transmittance = exp(-result);\n    return transmittance;\n}";

export { TransmittanceLUTWGSL as default };
